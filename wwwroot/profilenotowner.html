<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <button id="on_mainB">На главную</button>
    <button id="searchB">Поиск</button>
    <image id="photoIm">
    Имя: <label id="nameL"></label>
    Описание: <label id="descriptionL"></label>
    <button id="vkB">Вк</button>
    <button id="telegramB">Телеграм</button>
    Первый навык: <label id="first_skillL"></label>
    Второй навык: <label id="second_skillL"></label>
    Третий навык: <label id="third_skillL"></label>
    <div id="portfolios">

    </div>

    <script>
        const user_id = window.location.pathname.split("/")[2];
        document.getElementById("on_mainB").onclick = (() => window.location.href = "/");
        document.getElementById("searchB").onclick = (() => window.location = "../search");
        fetch("/api/" + user_id + "/getprofileinfo", {
            method: "GET"
        }).then(async (response) => {
            const data = await response.json();
            document.getElementById("photoIm").setAttribute("src", data.photo);
            document.getElementById("nameL").innerHTML = data.name;
            document.getElementById("descriptionL").innerHTML = data.description;
            if (data.vk != "") {
                const vkB = document.getElementById("vkB");
                vkB.onclick = (() => window.open("https://vk.com/" + data.vk, '_blank').focus());
                vkB.hidden = false;
            }

            if (data.telegram != "") {
                const telegramB = document.getElementById("telegramB");
                telegramB.onclick = (() => window.open("https://t.me/" + data.telegram, '_blank').focus());
                telegramB.hidden = false;
            }

            document.getElementById("first_skillL").innerHTML = data.first_skill;
            document.getElementById("second_skillL").innerHTML = data.second_skill;
            document.getElementById("third_skillL").innerHTML = data.third_skill;
            for (let portfolio of data.portfolio_infos) {
                const block = document.createElement("div");
                const photo = new Image();
                photo.src = portfolio.photo;
                block.appendChild(photo);
                const name = document.createElement("a");
                name.innerHTML = portfolio.name;
                name.href = user_id + "/p/" + portfolio.id;
                block.appendChild(name);
                document.getElementById("portfolios").appendChild(block);
            }
        });
    </script>

</body>
</html>